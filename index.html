<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Status Update Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
    }
    select, input, textarea, button {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <form id="statusForm">
    <div class="form-group">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" value="Yassine" readonly>
    </div>

    <div class="form-group">
      <label for="city">City:</label>
      <input type="text" id="city" name="city" value="Agadir" readonly>
    </div>

    <div class="form-group">
      <label for="status">Status:</label>
      <select id="status" name="status">
        <option value="nouveau">Nouveau</option>
        <option value="rdv_confirmé">RDV confirmé</option>
        <option value="essai_guidé_effectué">Essai guidé effectué</option>
        <option value="autres">Autres</option>
      </select>
    </div>

    <div class="form-group">
      <label for="appointment">Appointment:</label>
      <input type="datetime-local" id="appointment" name="appointment">
    </div>

    <div class="form-group">
      <label for="comment">Comment:</label>
      <textarea id="comment" name="comment" rows="3"></textarea>
    </div>

    <div class="form-group">
      <button type="button" id="contactButton">Contact</button>
      <div id="contactOptions" class="hidden">
        <button type="button">Appeler</button>
        <button type="button">Envoyer</button>
      </div>
    </div>

    <div class="form-group hidden" id="linkContainer">
      <button type="button" id="generateLinkButton">Generate Link</button>
      <input type="text" id="generatedLink" readonly>
      <button type="button" id="copyLinkButton">Copy Link</button>
      <button type="button" id="shareLinkButton">Share Link</button>
    </div>
  </form>

  <script>
    document.getElementById('status').addEventListener('change', function () {
      const selectedStatus = this.value;
      const linkContainer = document.getElementById('linkContainer');
      if (selectedStatus === 'essai_guidé_effectué') {
        linkContainer.classList.remove('hidden');
      } else {
        linkContainer.classList.add('hidden');
      }
    });

    document.getElementById('contactButton').addEventListener('click', function () {
      const contactOptions = document.getElementById('contactOptions');
      contactOptions.classList.toggle('hidden');
    });

    document.getElementById('generateLinkButton').addEventListener('click', function () {
      const link = 'https://iqostest.com/?agence=PMIMA&source=0626063022';
      const linkInput = document.getElementById('generatedLink');
      linkInput.value = link;
      alert('Link generated: ' + link);
    });

    document.getElementById('copyLinkButton').addEventListener('click', function () {
      const linkInput = document.getElementById('generatedLink');
      linkInput.select();
      document.execCommand('copy');
      alert('Link copied to clipboard!');
    });

    document.getElementById('shareLinkButton').addEventListener('click', function () {
      const link = document.getElementById('generatedLink').value;
      if (navigator.share) {
        navigator.share({
          title: 'Generated Link',
          text: 'Here is the link:',
          url: link
        }).then(() => {
          alert('Link shared successfully!');
        }).catch(err => {
          console.error('Error sharing:', err);
        });
      } else {
        alert('Sharing is not supported in this browser.');
      }
    });
  </script>
</body>
</html>
